<div class="dashboard-filter-container">
  <!-- Header Section -->
  <div class="filter-header">
    <div class="header-left">
      <i [class]="icon"></i>
      <h2 class="header-title">{{ title }}</h2>
      <span class="found-count">{{ foundCount }} attributions trouv√©es.</span>
    </div>
    <div class="header-right">
      <i class="fas fa-save"></i>
      <span class="sort-label">Nom du cas</span>
      <i class="fas fa-arrow-down-short-wide"></i>
    </div>
  </div>

  <!-- Dashboard Filter Accordion -->
  <div class="dashboard-filter-accordion">
    <fieldset class="filter-fieldset" [ngClass]="{'collapsed': !isExpanded}">
      <div class="accordion-header">
        <div class="header-input-group">
          <input type="text" placeholder="Filters" [(ngModel)]="filterText" (input)="onFilterChange()" class="filter-input">
        </div>
        <div class="header-input-group">
          <input type="text" placeholder="Site" [(ngModel)]="siteFilter" class="filter-input">
        </div>
        <div class="header-input-group">
          <input type="text" placeholder="Sectors" [(ngModel)]="sectorsFilter" class="filter-input">
        </div>
        <div class="header-input-group">
          <input type="text" placeholder="Assigned doctors" [(ngModel)]="assignedDoctorsFilter" class="filter-input">
        </div>
        <div class="header-input-group">
          <input type="date" [(ngModel)]="dateHeaderInput" (change)="onDateTextInput()" placeholder="Date" class="filter-input">
        </div>
        <button class="collapse-btn-positioned" (click)="toggleExpanded()">
          <i class="fas" [ngClass]="isExpanded ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
        </button>
      </div>

      <div class="accordion-content">
        <div class="filter-columns">
          <!-- First Column - Filters -->
          <div class="filter-column">
            <div class="column-content">
              <div class="radio-group horizontal">
                <label class="radio-option">
                  <input type="radio" name="caseType" value="all" [(ngModel)]="selectedCaseType" class="custom-radio">
                  <span class="radio-label">All</span>
                </label>
                <label class="radio-option">
                  <input type="radio" name="caseType" value="my-cases" [(ngModel)]="selectedCaseType" class="custom-radio">
                  <span class="radio-label">My cases</span>
                </label>
                <label class="radio-option">
                  <input type="radio" name="caseType" value="unassigned" [(ngModel)]="selectedCaseType" class="custom-radio">
                  <span class="radio-label">Unassigned</span>
                </label>
              </div>

              <div class="separator gray"></div>

              <div class="radio-group horizontal">
                <label class="radio-option">
                  <input type="radio" name="scanType" value="all" [(ngModel)]="selectedScanType" class="custom-radio">
                  <span class="radio-label">All</span>
                </label>
                <label class="radio-option">
                  <input type="radio" name="scanType" value="fully-scanned" [(ngModel)]="selectedScanType" class="custom-radio">
                  <span class="radio-label">Fully scanned</span>
                </label>
                <label class="radio-option">
                  <input type="radio" name="scanType" value="pending" [(ngModel)]="selectedScanType" class="custom-radio">
                  <span class="radio-label">Pending</span>
                </label>
              </div>

              <div class="separator gray"></div>

              <div class="checkbox-list">
                <label class="checkbox-option" *ngFor="let option of startedCheckboxes">
                  <input type="checkbox" class="custom-checkbox" [(ngModel)]="option.checked" (change)="onFilterChange()">
                  <span class="checkbox-label">{{ option.label }}</span>
                  <span class="option-count">{{ option.count }}</span>
                </label>
              </div>

              <div class="separator gray"></div>

              <div class="checkbox-list scrollable">
                <label class="checkbox-option" *ngFor="let option of filterCheckboxes">
                  <input type="checkbox" class="custom-checkbox" [(ngModel)]="option.checked" (change)="onFilterChange()">
                  <span class="checkbox-label">{{ option.label }}</span>
                  <span class="option-count">{{ option.count }}</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Second Column - Sites -->
          <div class="filter-column">
            <div class="column-content">
              <div class="checkbox-list scrollable">
                <label class="checkbox-option" *ngFor="let site of filteredSites">
                  <input type="checkbox" class="custom-checkbox" [(ngModel)]="site.checked" (change)="onFilterChange()">
                  <span class="checkbox-label">{{ site.label }}</span>
                  <span class="option-count">{{ site.count }}</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Third Column - Sectors -->
          <div class="filter-column">
            <div class="column-content">
              <div class="checkbox-list scrollable">
                <label class="checkbox-option" *ngFor="let sector of filteredSectors">
                  <input type="checkbox" class="custom-checkbox" [(ngModel)]="sector.checked" (change)="onFilterChange()">
                  <span class="checkbox-label">{{ sector.label }}</span>
                  <span class="option-count">{{ sector.count }}</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Fourth Column - Assigned Doctors -->
          <div class="filter-column">
            <div class="column-content">
              <div class="checkbox-list scrollable">
                <label class="checkbox-option" *ngFor="let doctor of filteredAssignedDoctors">
                  <input type="checkbox" class="custom-checkbox" [(ngModel)]="doctor.checked" (change)="onFilterChange()">
                  <span class="checkbox-label">{{ doctor.label }}</span>
                  <span class="option-count">{{ doctor.count }}</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Fifth Column - Date -->
          <div class="filter-column">
            <div class="column-content">
              <div class="date-radio-options">
                <label class="radio-option vertical" (mouseenter)="onRadioHover($event)" (mouseleave)="onRadioLeave($event)">
                  <input type="radio" name="dateRange" value="all" [(ngModel)]="selectedDateRange" (change)="onDateRangeChange()" class="custom-radio">
                  <span class="radio-label">All</span>
                </label>
                <label class="radio-option vertical" (mouseenter)="onRadioHover($event)" (mouseleave)="onRadioLeave($event)">
                  <input type="radio" name="dateRange" value="today" [(ngModel)]="selectedDateRange" (change)="onDateRangeChange()" class="custom-radio">
                  <span class="radio-label">Today</span>
                </label>
                <label class="radio-option vertical" (mouseenter)="onRadioHover($event)" (mouseleave)="onRadioLeave($event)">
                  <input type="radio" name="dateRange" value="yesterday" [(ngModel)]="selectedDateRange" (change)="onDateRangeChange()" class="custom-radio">
                  <span class="radio-label">Yesterday</span>
                </label>
                <label class="radio-option vertical" (mouseenter)="onRadioHover($event)" (mouseleave)="onRadioLeave($event)">
                  <input type="radio" name="dateRange" value="last-week" [(ngModel)]="selectedDateRange" (change)="onDateRangeChange()" class="custom-radio">
                  <span class="radio-label">Last Week</span>
                </label>
                <label class="radio-option vertical" (mouseenter)="onRadioHover($event)" (mouseleave)="onRadioLeave($event)">
                  <input type="radio" name="dateRange" value="last-6-months" [(ngModel)]="selectedDateRange" (change)="onDateRangeChange()" class="custom-radio">
                  <span class="radio-label">Last 6 Months</span>
                </label>
                <label class="radio-option vertical" (mouseenter)="onRadioHover($event)" (mouseleave)="onRadioLeave($event)">
                  <input type="radio" name="dateRange" value="from" [(ngModel)]="selectedDateRange" (change)="onDateRangeChange()" class="custom-radio">
                  <span class="radio-label">From</span>
                </label>
              </div>
              
              <div class="date-inputs-row">
                <div class="date-input-group">
                  <input type="date" class="date-input" [(ngModel)]="fromDate" (change)="onManualDateChange()" placeholder="From">
                  <i class="date-icon fas fa-calendar"></i>
                </div>
                <div class="date-input-group">
                  <input type="date" class="date-input" [(ngModel)]="toDate" (change)="onManualDateChange()" placeholder="To">
                  <i class="date-icon fas fa-calendar"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </fieldset>
  </div>
</div>