<div class="report-container">
  <div class="panel-header">
    <div class="header-info">
      <h3>
        <i class="fas fa-file-medical"></i>
        Rapport
      </h3>
      <div class="report-status">
        <span class="status-badge" [ngClass]="isDraft ? 'status-draft' : 'status-final'">
          {{isDraft ? 'Brouillon' : 'Finalisé'}}
        </span>
        <span class="last-saved">
          Dernière sauvegarde: {{lastSaved | date:'HH:mm'}}
        </span>
      </div>
    </div>
    
    <div class="header-actions">
      <button class="action-btn secondary" (click)="saveDraft()" title="Sauvegarder le brouillon">
        <i class="fas fa-save"></i>
      </button>
      <button class="action-btn primary" (click)="finalizeReport()" [disabled]="!isReportComplete()" title="Finaliser le rapport">
        <i class="fas fa-check"></i>
      </button>
    </div>
  </div>
  
  <div class="panel-content">
    <!-- Exam Summary -->
    <div class="exam-summary" *ngIf="exam">
      <h4>Informations de l'examen</h4>
      <div class="summary-grid">
        <div class="summary-item">
          <span class="label">Patient:</span>
          <span class="value">{{exam.patientName}}</span>
        </div>
        <div class="summary-item">
          <span class="label">Date:</span>
          <span class="value">{{exam.examDate | date:'dd/MM/yyyy'}}</span>
        </div>
        <div class="summary-item">
          <span class="label">Type:</span>
          <span class="value">{{exam.title}}</span>
        </div>
        <div class="summary-item">
          <span class="label">Région:</span>
          <span class="value">{{exam.anatomicalRegion}}</span>
        </div>
      </div>
    </div>
    
    <!-- Report Form -->
    <div class="report-form">
      <div class="form-section">
        <label for="findings">Observations</label>
        <textarea 
          id="findings"
          [(ngModel)]="reportData.findings"
          placeholder="Décrivez les observations principales..."
          rows="4">
        </textarea>
      </div>
      
      <div class="form-section">
        <label for="impression">Impression diagnostique</label>
        <textarea 
          id="impression"
          [(ngModel)]="reportData.impression"
          placeholder="Votre impression diagnostique..."
          rows="3">
        </textarea>
      </div>
      
      <div class="form-section">
        <label for="recommendation">Recommandations</label>
        <textarea 
          id="recommendation"
          [(ngModel)]="reportData.recommendation"
          placeholder="Recommandations pour le suivi..."
          rows="3">
        </textarea>
      </div>
      
      <div class="form-section">
        <label for="conclusion">Conclusion</label>
        <textarea 
          id="conclusion"
          [(ngModel)]="reportData.conclusion"
          placeholder="Conclusion finale..."
          rows="2">
        </textarea>
      </div>
      
      <div class="form-section">
        <label for="notes">Notes additionnelles</label>
        <textarea 
          id="notes"
          [(ngModel)]="reportData.additionalNotes"
          placeholder="Notes supplémentaires..."
          rows="2">
        </textarea>
      </div>
    </div>
    
    <!-- Report Actions -->
    <div class="report-actions">
      <button class="btn-secondary" (click)="saveDraft()">
        <i class="fas fa-save"></i>
        Sauvegarder brouillon
      </button>
      <button class="btn-primary" (click)="finalizeReport()" [disabled]="!isReportComplete()">
        <i class="fas fa-check-circle"></i>
        Finaliser rapport
      </button>
    </div>
  </div>
</div>